"use strict";function woostifyAjaxSingleAddToCartButton(){var t=document.querySelectorAll(".single_add_to_cart_button");t.length&&t.forEach(function(s){var t=s.closest("form.cart"),n=t.classList.contains("variations_form"),e=t.querySelector('[name="add-to-cart"]'),o=!!e&&e.value,r=t.querySelector(".qty"),l=t.querySelector(".additional-product"),d=!1,u={};if(n)var f=t.querySelector('[name="product_id"]'),_=t.querySelector('[name="variation_id"]'),v=t.querySelectorAll('select[name^="attribute"]');!o||t.classList.contains("grouped_form")||t.classList.contains("mnm_form")||s.addEventListener("click",function(t){t.preventDefault();var e=r?parseInt(r.value):0;n&&(o=f.value,d=_.value,v.forEach(function(t){var e=t.name,a=t.value;u[e]=a}));var i=document.querySelector(".cart-sidebar-content"),c=document.getElementsByClassName("shop-cart-count");if(r.classList.contains("ajax-ready")){s.classList.add("loading"),l&&(l.value=+l.value+ +r.value),"function"==typeof eventCartSidebarOpen&&eventCartSidebarOpen(),"function"==typeof cartSidebarOpen&&cartSidebarOpen(),"function"==typeof closeAll&&closeAll();var a=new Request(woostify_ajax_single_add_to_cart_data.ajax_url,{method:"POST",body:"action=single_add_to_cart&ajax_nonce="+woostify_ajax_single_add_to_cart_data.ajax_nonce+"&product_id="+o+"&product_qty="+e+"&variation_id="+d+"&variations="+JSON.stringify(u),credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})});fetch(a).then(function(t){if(200!==t.status)throw alert(woostify_ajax_single_add_to_cart_data.ajax_error),console.log("Status Code: "+t.status),t;return t.json()}).then(function(t){if(t.success){var e=t.data;if(c.length)for(var a=0,n=c.length;a<n;a++)c[a].innerHTML=e.item;if(i&&(i.innerHTML=e.content),s.classList.contains("woostify-buy-now")){var o=s.getAttribute("data-checkout_url");window.location=o}var r=document.querySelector(".woostify-total-price");r&&(r.innerHTML=e.total)}}).catch(function(t){console.log(t)}).finally(function(){"function"==typeof eventCartSidebarClose&&eventCartSidebarClose(),s.classList.remove("loading"),document.documentElement.classList.remove("quick-view-open")})}})})}document.addEventListener("DOMContentLoaded",function(){woostifyAjaxSingleAddToCartButton()});